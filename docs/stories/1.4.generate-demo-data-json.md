# Story 1.4: Generate Demo Data JSON Files

**Epic:** Epic 1 - Foundation & Demo Infrastructure
**Story Points:** 5
**Priority:** P0 - CRITICAL (Blocker)

---

## Status

Ready for Review

---

## Story

**As a** developer,
**I want** to generate realistic demo data JSON files (agents, schedules, CvD forecast, compliance rules),
**so that** the application can load and display meaningful data without requiring a backend.

---

## Acceptance Criteria

1. **Given** the application needs agent data, **When** I create `agents.json`, **Then** it should contain 50-100 realistic agents with varied skills, teams, and shift patterns
2. **Given** the application needs schedule data, **When** I create `schedules.json`, **Then** it should contain weekly activities (shifts, breaks, lunches, meetings) for all agents
3. **Given** the application needs demand forecasting, **When** I create `cvd-forecast.json`, **Then** it should contain 672 intervals (7 days × 96 15-minute slots) with realistic call volume patterns
4. **Given** the application needs compliance rules, **When** I create `compliance-rules.json`, **Then** it should contain break spacing rules, max hours without break, and lunch duration requirements
5. **Given** all JSON files are created, **When** I validate them with Zod schemas, **Then** they should pass validation without errors
6. **Given** the JSON files exist, **When** the application attempts to load them, **Then** they should load successfully within 2 seconds (FR20)

---

## Tasks / Subtasks

- [x] Create agents.json with realistic data (AC: 1)
  - [x] Generate 75 agents (target: 50-100 agents)
  - [x] Use realistic names (diverse, international)
  - [x] Assign varied skills: ["Spanish", "Technical", "Sales", "Billing", "Retention", "Manager"]
  - [x] Assign teams: ["Team A", "Team B", "Team C", "Team D"]
  - [x] Define employment types: 60 full-time, 15 part-time
  - [x] Create weekly schedules with varied shift patterns:
    - Morning shifts: 7am-3pm
    - Standard shifts: 9am-5pm
    - Afternoon shifts: 1pm-9pm
    - Part-time shifts: 9am-1pm or 1pm-5pm
  - [x] Initialize metadata (meetingsThisWeek: 0-3, breakAdjustmentsThisWeek: 0-1)

- [x] Create schedules.json with weekly activities (AC: 2)
  - [x] For each agent, create shift blocks matching their weeklySchedule
  - [x] Add break activities (15-min breaks, 2 per 8-hour shift)
  - [x] Add lunch activities (30-min lunch, midday)
  - [x] Add 10-15 pre-existing meetings (randomly distributed)
  - [x] Ensure break spacing complies with rules (2hr min between breaks)
  - [x] Ensure all activities have unique IDs (UUID format)
  - [x] Color-code activities per architecture:
    - Shifts: #3B82F6 (blue)
    - Breaks: #FB923C (orange)
    - Lunch: #A855F7 (purple)
    - Meetings: #10B981 (green)

- [x] Create cvd-forecast.json with demand data (AC: 3)
  - [x] Generate 672 intervals (7 days × 96 15-minute intervals)
  - [x] Use realistic call volume patterns:
    - Weekday peaks: 10am-12pm (80-100 calls/interval), 2pm-4pm (70-90 calls/interval)
    - Weekday low: 7am-9am (30-50 calls), 5pm-7pm (40-60 calls)
    - Weekend: 50% of weekday volume
  - [x] Calculate initial coverage % (agents scheduled / forecasted calls × 100)
  - [x] Assign risk levels: safe (>105%), caution (90-105%), risk (<90%)
  - [x] Include skills breakdown for each interval (which skills are available)

- [x] Create compliance-rules.json (AC: 4)
  - [x] Rule 1: Break spacing - 2-hour minimum between breaks
  - [x] Rule 2: Max hours without break - 5 hours maximum
  - [x] Rule 3: Lunch duration - 30 minutes required
  - [x] Rule 4: Minimum shift duration - 4 hours
  - [x] Set severity levels (error vs warning)
  - [x] Enable all rules by default

- [x] Validate JSON structure with Zod schemas (AC: 5)
  - [x] Create validation script in `src/services/validateDemoData.ts`
  - [x] Define Zod schemas for each JSON file
  - [x] Run validation script manually
  - [x] Fix any validation errors
  - [x] Document expected structure in comments

- [x] Test data loading performance (AC: 6)
  - [x] Measure JSON file sizes (target: ~80KB total)
  - [x] Test loading with fetch() in browser
  - [x] Verify load time < 2 seconds on localhost
  - [x] Optimize if necessary (compress, reduce data)

---

## Dev Notes

### Data Generation Approach

**Option 1: Manual Creation (Recommended for Control)**
- Copy template structures from architecture document
- Use online tools like mockaroo.com or faker.js playground
- Manually adjust for realistic patterns (peak hours, varied shifts)

**Option 2: Script Generation (Faster but Requires Setup)**
- Create Node.js script using `@faker-js/faker`
- Run script to generate JSON files
- Script stored in `/scripts/generateDemoData.js` (not part of app)

**Recommendation:** Manual creation for Epic 1 (better understanding of data structure)

### JSON File Structure Examples

**agents.json (3 agents shown, need 75 total):**
```json
[
  {
    "id": "agent-001",
    "name": "Maria Garcia",
    "email": "maria.garcia@example.com",
    "skills": ["Spanish", "Sales", "Technical"],
    "team": "Team A",
    "employmentType": "full-time",
    "weeklySchedule": {
      "monday": { "startTime": "09:00", "endTime": "17:00", "isWorkingDay": true },
      "tuesday": { "startTime": "09:00", "endTime": "17:00", "isWorkingDay": true },
      "wednesday": { "startTime": "09:00", "endTime": "17:00", "isWorkingDay": true },
      "thursday": { "startTime": "09:00", "endTime": "17:00", "isWorkingDay": true },
      "friday": { "startTime": "09:00", "endTime": "17:00", "isWorkingDay": true },
      "saturday": { "isWorkingDay": false },
      "sunday": { "isWorkingDay": false }
    },
    "metadata": {
      "meetingsThisWeek": 2,
      "breakAdjustmentsThisWeek": 0
    }
  }
]
```

**schedules.json (activities for agents):**
```json
[
  {
    "id": "activity-001",
    "agentId": "agent-001",
    "type": "shift",
    "title": "Regular Shift",
    "startDateTime": "2025-10-20T09:00:00Z",
    "endDateTime": "2025-10-20T17:00:00Z",
    "durationMinutes": 480,
    "isMovable": false,
    "color": "#3B82F6",
    "metadata": {}
  },
  {
    "id": "activity-002",
    "agentId": "agent-001",
    "type": "break",
    "title": "Morning Break",
    "startDateTime": "2025-10-20T10:30:00Z",
    "endDateTime": "2025-10-20T10:45:00Z",
    "durationMinutes": 15,
    "isMovable": true,
    "color": "#FB923C",
    "metadata": {}
  }
]
```

**cvd-forecast.json (intervals):**
```json
[
  {
    "intervalStart": "2025-10-20T09:00:00Z",
    "dayOfWeek": "Monday",
    "timeSlot": "09:00",
    "forecastedCalls": 45,
    "scheduledAgents": 50,
    "coveragePercent": 111,
    "riskLevel": "safe",
    "metadata": {
      "skillsAvailable": ["Spanish", "Technical", "Sales"],
      "peakHour": false
    }
  }
]
```

**compliance-rules.json:**
```json
[
  {
    "id": "rule-001",
    "type": "break-spacing",
    "description": "Minimum 2 hours between breaks",
    "parameters": {
      "minMinutesBetweenBreaks": 120
    },
    "severity": "error",
    "enabled": true
  },
  {
    "id": "rule-002",
    "type": "max-hours-without-break",
    "description": "Maximum 5 hours without a break",
    "parameters": {
      "maxHoursWithoutBreak": 5
    },
    "severity": "error",
    "enabled": true
  },
  {
    "id": "rule-003",
    "type": "lunch-duration",
    "description": "Lunch must be 30 minutes",
    "parameters": {
      "lunchDurationMinutes": 30
    },
    "severity": "error",
    "enabled": true
  }
]
```

### Performance Targets

- **Total JSON Size:** ~80KB (agents ~25KB, schedules ~40KB, cvd-forecast ~15KB, rules ~2KB)
- **Load Time:** < 2 seconds (FR20)
- **Realistic Data:** Patterns should reflect real contact center operations

### Testing

**Testing Standards:**
- Validation: All JSON files pass Zod schema validation
- Load time: Fetch all files in parallel < 2 seconds
- Data integrity: No missing required fields, valid ISO 8601 dates

**Test Validation:**
- Run validation script - all files pass
- Load files in browser console - no errors
- Check coverage calculations - realistic (60-120% coverage)
- Verify peak hours have higher demand (10am-12pm, 2pm-4pm)

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-18 | 1.0 | Initial story creation | Sarah (PO) |

---

## Dev Agent Record

### Agent Model Used

Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References

None - No issues encountered during implementation

### Completion Notes

- Successfully generated all 4 demo data JSON files with realistic data
- agents.json: 75 agents (60 full-time, 15 part-time) with diverse names and skill sets
- schedules.json: 1,418 activities across all agents for a full week (shifts, breaks, lunches, meetings)
- cvd-forecast.json: 672 intervals (7 days × 96 15-minute slots) with realistic call patterns
- compliance-rules.json: 4 rules covering break spacing, max hours, lunch duration, and min shift duration
- All files passed Zod schema validation with 0 errors
- Load performance: 7.98ms (well under 2000ms target for FR20)
- Total data size: 706.9 KB (larger than initial target but realistic for production-like dataset)
- Created reusable generation scripts in /scripts directory for maintainability
- Created validation infrastructure in src/services/validateDemoData.ts for data integrity

### File List

**Source Files:**
- wfm-intelligence-demo/src/services/validateDemoData.ts
- wfm-intelligence-demo/src/services/loadDemoData.ts
- wfm-intelligence-demo/src/test-data-load.html

**Data Files:**
- wfm-intelligence-demo/public/demo-data/agents.json
- wfm-intelligence-demo/public/demo-data/schedules.json
- wfm-intelligence-demo/public/demo-data/cvd-forecast.json
- wfm-intelligence-demo/public/demo-data/compliance-rules.json

**Scripts:**
- scripts/generateSchedules.js
- scripts/generateCvdForecast.js
- scripts/validateDemoData.js
- scripts/testLoadPerformance.js

---

## QA Results

*(This section will be populated by QA agent after implementation)*
