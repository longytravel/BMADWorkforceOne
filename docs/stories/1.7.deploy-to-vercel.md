# Story 1.7: Deploy to Vercel

**Epic:** Epic 1 - Foundation & Demo Infrastructure
**Story Points:** 2
**Priority:** P0 - Critical

---

## Status

Ready

---

## Story

**As a** developer,
**I want** to deploy the application to Vercel and verify the live URL works,
**so that** I can validate the full development-to-deployment pipeline and share the demo with stakeholders.

---

## Acceptance Criteria

1. **Given** I have a Vercel account, **When** I connect my GitHub repository, **Then** Vercel should auto-detect the Vite project and configure build settings
2. **Given** Vercel is configured, **When** I push code to the `main` branch, **Then** Vercel should auto-deploy and provide a live URL
3. **Given** the deployment succeeds, **When** I visit the live URL, **Then** I should see the app shell with header and loading screen/dashboard
4. **Given** the app loads demo data, **When** I check the browser console, **Then** JSON files should load successfully from `/demo-data/` path
5. **Given** the deployment is complete, **When** I check Vercel dashboard, **Then** I should see build logs, deployment status, and performance metrics
6. **Given** I want to test changes, **When** I create a Pull Request, **Then** Vercel should create a preview deployment with unique URL

---

## Tasks / Subtasks

- [ ] Create Vercel account and connect GitHub (AC: 1)
  - [ ] Sign up at vercel.com (free tier, no credit card required)
  - [ ] Connect GitHub account to Vercel
  - [ ] Grant Vercel access to the WFM demo repository

- [ ] Import project to Vercel (AC: 1)
  - [ ] Click "New Project" in Vercel dashboard
  - [ ] Select GitHub repository: `wfm-intelligence-demo`
  - [ ] Verify Vercel auto-detects Framework: Vite
  - [ ] Verify Build Command: `npm run build`
  - [ ] Verify Output Directory: `dist`
  - [ ] Verify Install Command: `npm install`
  - [ ] Click "Deploy"

- [ ] Verify initial deployment (AC: 2, 3)
  - [ ] Wait for deployment to complete (~60 seconds)
  - [ ] Click "Visit" button to open live URL
  - [ ] Verify app shell renders correctly
  - [ ] Verify header displays "Intelligent WFM Scheduling Demo"
  - [ ] Verify no console errors in browser

- [ ] Test demo data loading on production (AC: 4)
  - [ ] Open browser DevTools → Network tab
  - [ ] Refresh the live URL
  - [ ] Verify `/demo-data/agents.json` loads (Status 200)
  - [ ] Verify `/demo-data/schedules.json` loads (Status 200)
  - [ ] Verify `/demo-data/cvd-forecast.json` loads (Status 200)
  - [ ] Verify `/demo-data/compliance-rules.json` loads (Status 200)
  - [ ] Check total load time < 2 seconds (FR20)

- [ ] Configure Vercel settings (optional but recommended)
  - [ ] Set project name: `wfm-intelligence-demo` (or custom)
  - [ ] Configure production branch: `main`
  - [ ] Enable automatic deployments on push
  - [ ] Configure preview deployments for Pull Requests
  - [ ] Add environment variable (if needed): `VITE_APP_VERSION=2.0`

- [ ] Test preview deployment workflow (AC: 6)
  - [ ] Create a test branch: `git checkout -b test/vercel-preview`
  - [ ] Make a small change (e.g., update header text)
  - [ ] Push branch to GitHub
  - [ ] Create Pull Request on GitHub
  - [ ] Verify Vercel bot comments on PR with preview URL
  - [ ] Visit preview URL - verify changes visible
  - [ ] Merge or close PR (cleanup test)

- [ ] Document deployment details (AC: 5)
  - [ ] Copy production URL (e.g., `https://wfm-intelligence-demo.vercel.app`)
  - [ ] Save Vercel project dashboard URL
  - [ ] Note deployment settings for README (Story 1.8)
  - [ ] Verify analytics enabled (Vercel Analytics free tier)

---

## Dev Notes

### Vercel Configuration (Auto-Detected)

**Framework Preset:** Vite
**Build Command:** `npm run build`
**Output Directory:** `dist`
**Install Command:** `npm install`
**Node.js Version:** 18.x (latest LTS)

These settings are automatically detected by Vercel based on the Vite project structure. No manual configuration needed.

### Deployment Flow

1. **Push to GitHub** (`main` branch)
2. **Vercel webhook triggers** (automatic)
3. **Vercel runs build:**
   ```bash
   npm install
   npm run build
   ```
4. **Vercel deploys `dist/` folder** to global CDN
5. **Live URL updated** (~60 seconds total)

### Vercel Free Tier Limits

✅ **Included:**
- Unlimited deployments
- Unlimited bandwidth
- Global CDN (300+ locations)
- Automatic HTTPS
- Preview deployments for PRs
- Basic analytics
- GitHub integration

❌ **Not Included (Not Needed):**
- Custom domains (can add later)
- Password protection (demo is public)
- Edge functions (not needed - client-side only)

### Expected Live URL Structure

**Production:** `https://wfm-intelligence-demo.vercel.app`
**Preview (PR #123):** `https://wfm-intelligence-demo-git-branch-name.vercel.app`

### Troubleshooting Common Issues

**Issue:** Build fails with "Module not found"
**Solution:** Verify all dependencies in `package.json`, run `npm install` locally

**Issue:** Demo data files not loading (404 error)
**Solution:** Verify files exist in `public/demo-data/` folder, check file paths

**Issue:** Environment variables not working
**Solution:** Add variables in Vercel dashboard → Project Settings → Environment Variables

### Architecture References

**From Architecture Document (Section: Deployment Architecture):**
- Platform: Vercel (Free Tier)
- Deployment Host: Global Edge Network (automatic worldwide distribution)
- CI/CD: Vercel Auto-Deploy (GitHub push → live URL in ~60 seconds)

**From Architecture Document (Section: Tech Stack):**
- Deployment Platform: Vercel (zero-config, free tier, instant deploys)
- Monitoring: Vercel Analytics (free tier, Web Vitals tracking)

### Performance Targets (To Verify on Live URL)

- **Initial Load:** < 2 seconds (FR20)
- **Bundle Size:** ~380KB gzipped
- **CDN Delivery:** <100ms asset delivery from edge locations

### Testing

**Testing Standards:**
- Manual verification: Live URL loads successfully
- Manual verification: All demo data files load (Network tab)
- Manual verification: No console errors on production
- Manual verification: Preview deployment works for PRs

**Test Validation:**
- Visit production URL - app renders correctly
- Check Network tab - all JSON files load (Status 200)
- Check Console - no errors
- Measure load time - < 2 seconds
- Create PR - preview deployment URL generated
- Verify Vercel dashboard shows deployment logs and analytics

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-18 | 1.0 | Initial story creation | Sarah (PO) |

---

## Dev Agent Record

*(This section will be populated by the development agent during implementation)*

### Agent Model Used

*(To be filled by dev agent)*

### Debug Log References

*(To be filled by dev agent)*

### Completion Notes

*(To be filled by dev agent)*

### File List

*(To be filled by dev agent)*

---

## QA Results

*(This section will be populated by QA agent after implementation)*
